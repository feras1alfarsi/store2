<!-- ============ HEADER (Fragment) ============ -->
<style>
  :root{
    --brand:#111827;
    --accent:#ff3b30;
    --muted:#6b7280;
    --bg-soft:#f8fafc;
  }

  .topbar{
    background: #0b1220;
    color: #e5e7eb;
    font-size: .9rem;
  }
  .topbar a{ color:#e5e7eb; text-decoration:none; }
  .topbar a:hover{ opacity:.85; }

  .brand-logo{
    width:44px;height:44px;border-radius:14px;
    display:inline-grid;place-items:center;
    background: linear-gradient(135deg, #111827, #374151);
    color:#fff;font-weight:800;
    box-shadow: 0 10px 25px rgba(0,0,0,.12);
  }
  .brand-name{ font-weight:800; letter-spacing:.3px; color:var(--brand); }

  .search-pill .form-control{
    border-radius:999px;
    padding-right: 42px;
  }
  .search-pill .btn{
    border-radius:999px;
    min-width:42px;
  }

  .icon-btn{
    width:42px;height:42px;border-radius:14px;
    display:inline-grid;place-items:center;
    background: #fff;
    border: 1px solid rgba(17,24,39,.08);
    box-shadow: 0 10px 25px rgba(0,0,0,.06);
    color: var(--brand);
  }
  .icon-btn:hover{ transform: translateY(-1px); }

  .badge-dot{
    position:absolute; top:-6px; left:-6px;
    background: var(--accent);
    border: 2px solid #fff;
  }

  .nav-surface{
    background:#fff;
    border-top: 1px solid rgba(17,24,39,.06);
    border-bottom: 1px solid rgba(17,24,39,.06);
  }
  .navbar .nav-link{
    font-weight: 700;
    color: #111827;
  }
  .navbar .nav-link:hover{ color: var(--accent); }

  .sticky-shadow{
    box-shadow: 0 12px 30px rgba(0,0,0,.08);
  }

  .truncate-1{
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    line-clamp: 1;
    -webkit-line-clamp: 1;
  }
</style>

<!-- Top Bar -->
<div class="topbar py-2">
  <div class="container">
    <div class="d-flex justify-content-between">
      <span><i class="bi bi-truck"></i> شحن سريع داخل السعودية</span>
      <span><i class="bi bi-arrow-repeat"></i> استرجاع خلال 14 يوم</span>
    </div>
  </div>
</div>

<header id="mainHeader" class="bg-white">
  <div class="container py-3">
    <div class="row g-3 align-items-center">

      <!-- Brand -->
      <div class="col-lg-3">
        <a href="/" class="d-flex align-items-center gap-2 text-decoration-none">
          <span class="brand-logo">FW</span>
          <div>
            <div class="brand-name">Fashion Ward</div>
            <small class="text-muted">ملابس • أناقة • عروض</small>
          </div>
        </a>
      </div>

      <!-- Search -->
      <div class="col-lg-6">
        <form class="search-pill">
          <div class="input-group">
            <input class="form-control" placeholder="ابحث عن منتج..." />
            <button class="btn btn-dark"><i class="bi bi-search"></i></button>
          </div>
        </form>
      </div>

      <!-- Actions -->
      <div class="col-lg-3">
        <div class="d-flex gap-2 justify-content-end align-items-center">

          {% if user.is_authenticated %}
            <!-- Logged in -->
            <div class="dropdown">
              <button class="icon-btn dropdown-toggle" data-bs-toggle="dropdown">
                <i class="bi bi-person-check"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-end text-end">
                <li class="dropdown-item fw-bold">{{ user.username }}</li>
                <li><hr class="dropdown-divider"></li>
                <li>
                  <a class="dropdown-item text-danger" href="{% url 'logout' %}">
                    تسجيل الخروج
                  </a>
                </li>
              </ul>
            </div>
          {% else %}
            <!-- Guest -->
            <a href="{% url 'login' %}" class="btn btn-outline-dark">
              <i class="bi bi-box-arrow-in-left"></i> دخول
            </a>
            <a href="{% url 'signup' %}" class="btn btn-dark">
              <i class="bi bi-person-plus"></i> حساب جديد
            </a>
          {% endif %}

          <button class="icon-btn" data-bs-toggle="offcanvas" data-bs-target="#cartCanvas">
            <i class="bi bi-bag"></i>
          </button>

        </div>
      </div>

    </div>
  </div>
</header>
